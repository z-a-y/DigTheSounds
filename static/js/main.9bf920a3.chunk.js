(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,a){e.exports=a(67)},56:function(e,t,a){},58:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),s=(a(56),a(16)),c=a(17),l=a(21),u=a(18),m=a(22),p=a(13),h=a(37),d=["user-top-read"],g=a(97),b=a(86),f=a(5),y=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var v=y,E=(a(58),a(88)),j=a(89),k=a(90),O=a(91),w=a(92),C=a(93),_=a(46),S=a.n(_),x=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"playPreview",value:function(e){var t=new Audio(e);t.addEventListener("canplaythrough",function(e){t.play(),setTimeout(function(){t.pause()},7e3)})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.item.album.release_date,n=this.props.item.preview_url,o="";return a&&(o=a.substring(0,4)),r.a.createElement(b.a,{item:!0},r.a.createElement(E.a,{raised:!0,className:t.root},r.a.createElement(j.a,{disableTouchRipple:!0},r.a.createElement(k.a,{component:"img",alt:this.props.item.name,image:this.props.item.album.images[0].url,title:this.props.item.name,key:this.props.item.name}),r.a.createElement(O.a,null,r.a.createElement(w.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},this.props.item.name),r.a.createElement(w.a,{variant:"body2",color:"textSecondary",component:"p"},this.props.item.artists[0].name),r.a.createElement(w.a,{variant:"caption",color:"textSecondary",component:"p",noWrap:!0},this.props.item.album.name+" ("+o+")")),r.a.createElement(C.a,{onClick:function(){return e.playPreview(n)},color:"secondary",className:t.fab1,size:"small"},r.a.createElement(S.a,{className:t.playIcon})))))}}]),t}(r.a.Component),T=Object(f.a)(function(){return{root:{maxWidth:250},fab1:{position:"absolute",top:10,right:10}}})(x),N=a(94),P=a(95),z=a(100),B=a(96),R=a(98),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(N.a,{position:"static"},r.a.createElement(P.a,{dense:"true"},r.a.createElement(z.a,{row:!0,name:"gender1",defaultValue:"",onChange:this.props.handleChange,className:e.root},r.a.createElement(B.a,{value:"short",control:r.a.createElement(R.a,null),label:"Short Term"}),r.a.createElement(B.a,{value:"medium",control:r.a.createElement(R.a,null),label:"Medium Term"}),r.a.createElement(B.a,{value:"long",control:r.a.createElement(R.a,null),label:"Long Term"}))))}}]),t}(r.a.Component),W=Object(f.a)(function(){return{root:{float:"none",maxWidth:"450px",marginLeft:"auto",marginRight:"auto"}}})(L),A=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},no_data:!1,term:"medium",user:{}},e.getCurrentlyPlaying=e.getCurrentlyPlaying.bind(Object(p.a)(Object(p.a)(e))),e.handleChange=e.handleChange.bind(Object(p.a)(Object(p.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=v.access_token;e&&(this.setState({token:e}),this.getCurrentlyPlaying(e),this.getUser(e))}},{key:"componentDidUpdate",value:function(e){var t=v.access_token;e.term!==this.state.term&&this.getCurrentlyPlaying(t)}},{key:"getCurrentlyPlaying",value:function(e){var t=this;h.ajax({url:"https://api.spotify.com/v1/me/top/tracks?time_range="+this.state.term+"_term&limit=12",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){e?t.setState({items:e.items,no_data:!1}):t.setState({no_data:!0})}})}},{key:"getUser",value:function(e){var t=this;h.ajax({url:"https://api.spotify.com/v1/me",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){t.setState({user:e}),console.log(e)}})}},{key:"handleChange",value:function(e){this.setState({term:e.target.value})}},{key:"render",value:function(){var e=[],t=this.props.classes;return this.state.items&&(e=this.state.items),r.a.createElement("div",{className:"App"},!this.state.token&&r.a.createElement(g.a,{href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("612ced444c3b4b5bb5359d317aaf8dba","&redirect_uri=").concat("https://z-a-y.github.io/DigTheSounds/","&scope=").concat(d.join("%20"),"&response_type=token&show_dialog=true"),variant:"contained",color:"primary",size:"large",disableElevation:!0,className:t.loginButton},"Login to Spotify"),this.state.token&&!this.state.no_data&&r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{handleChange:this.handleChange}),r.a.createElement(b.a,{container:!0,spacing:3,direction:"row",justify:"center",alignItems:"center",className:t.grid1},e.map(function(e){return r.a.createElement(T,{key:e.name,item:e})}))))}}]),t}(n.Component),I=Object(f.a)(function(){return{root:{float:"none",maxWidth:"450px",marginLeft:"auto",marginRight:"auto"},grid1:{marginTop:"8px"},loginButton:{marginTop:"40vh"}}})(A);i.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[50,2,1]]]);
//# sourceMappingURL=main.9bf920a3.chunk.js.map